/*
 * DC Mega Menu - jQuery mega menu
 * Copyright (c) 2011 Design Chemical
 * http://www.designchemical.com/blog/
 *
 * Dual licensed under the MIT and GPL licenses:
 * 	http://www.opensource.org/licenses/mit-license.php
 * 	http://www.gnu.org/licenses/gpl.html
 *
 */
(function(a){a.fn.dcMegaMenu=function(b){var c={classParent:"dc-mega",classContainer:"sub-container",classSubParent:"mega-hdr",classSubLink:"mega-hdr",classWidget:"dc-extra",rowItems:3,speed:"fast",effect:"fade",event:"hover",fullWidth:false,onLoad:function(){},beforeOpen:function(){},beforeClose:function(){}};var b=a.extend(c,b);var d=this;return d.each(function(b){function j(){var b=a(".sub",this);a(this).addClass("mega-hover");if(c.effect=="fade"){a(b).fadeIn(c.speed)}if(c.effect=="slide"){a(b).show(c.speed)}var d=a(b).parent(".sub-container");if(a(d).css("display")=="block"&&!a(this).hasClass("sbHolder")&&!a(this).hasClass("sbToggle")&&!a(this).hasClass("sbSelector")&&!a(this).hasClass("sbOptions")){a("select").selectbox("close")}if(a.browser.msie){megaMenuForIE(a(b))}a(".mega").find(a(b)).each(function(){setHeight(a(this))});c.beforeOpen.call(this)}function k(b){var d=a(".sub",b);a(b).addClass("mega-hover");if(c.effect=="fade"){a(d).fadeIn(c.speed)}if(c.effect=="slide"){a(d).show(c.speed)}c.beforeOpen.call(this)}function l(){var b=a(".sub",this);a(this).removeClass("mega-hover");c.beforeClose.call(this)}function m(b){var d=a(".sub",b);a(b).removeClass("mega-hover");a(d).hide();c.beforeClose.call(this)}function n(){a("li",d).removeClass("mega-hover");a(".sub",d).hide()}function o(){$arrow='<span class="dc-mega-icon"></span>';var b=g+"-li";var o=d.outerWidth();a("> li",d).each(function(){var j=a("> ul",this);var k=a("> a",this);if(j.length){k.addClass(g).append($arrow);j.addClass("sub").wrap('<div class="'+h+'" />');var l=a(this).position();pl=l.left;if(a("ul",j).length){a(this).addClass(b);a("."+h,this).addClass("mega");a("> li",j).each(function(){if(!a(this).hasClass(i)){a(this).addClass("mega-unit");if(a("> ul",this).length){a(this).addClass(e);a("> a",this).addClass(e+"-a")}else{a(this).addClass(f);a("> a",this).addClass(f+"-a")}}});var m=a(".mega-unit",this);rowSize=parseInt(c.rowItems);for(var n=0;n<m.length;n+=rowSize){m.slice(n,n+rowSize).wrapAll('<div class="row" />')}j.show();var p=a(this).width();var q=pl+p;var r=o-q;var s=j.outerWidth();var t=j.parent("."+h).outerWidth();var u=t-s;if(c.fullWidth==true){var v=o-u;j.parent("."+h).css({width:v+"px"});d.addClass("full-width")}var w=a(".mega-unit",j).outerWidth(true);var x=a(".row:eq(0) .mega-unit",j).length;var y=w*x;var z=y+u;a(".row",this).each(function(){a(".mega-unit:last",this).addClass("last");var b=undefined;a(".mega-unit > a",this).each(function(){var c=parseInt(a(this).height());if(b===undefined||b<c){b=c}});a(".mega-unit > a",this).css("height",b+"px");a(this).css("width",y+"px")});var A=0;if(!a.browser.msie){var B=o-(pl+z);var C=pl-A;var D={left:pl+"px",marginLeft:-A+"px"};if(C<0||c.fullWidth==true){D={left:0}}else if(B<=2){D={right:0}}a("."+h,this).css(D)}a(".row",j).each(function(){var b=a(this).height();a(".mega-unit",this).css({height:b+"px"});a(this).parent(".row").css({height:b+"px"})});j.hide()}else{var E=a("."+h,this).addClass("non-mega");var F=a(E).find("a");a(E).css("left",pl+"px");var G=a(E).parent("li").width()-parseInt(a(F).css("padding-left"))-parseInt(a(F).css("padding-right"));a(F).css("min-width",G)}}});var p=a("> li",d).outerHeight(true);a("."+h,d).css({top:p+"px"}).css("z-index","5010");if(c.event=="hover"){var q={sensitivity:2,interval:100,over:j,timeout:400,out:l};a("li",d).hoverIntent(q)}if(c.event=="click"){a("body").mouseup(function(b){if(!a(b.target).parents(".mega-hover").length){n()}});a("> li > a."+g,d).click(function(b){var c=a(this).parent();if(c.hasClass("mega-hover")){m(c)}else{k(c)}b.preventDefault()})}c.onLoad.call(this)}var e=c.classSubParent;var f=c.classSubLink;var g=c.classParent;var h=c.classContainer;var i=c.classWidget;o()})}})(jQuery)